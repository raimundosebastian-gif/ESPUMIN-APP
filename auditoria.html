<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ESPUMIN - Auditoría</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <!-- Menú -->
    <div id="menu-container"></div>

    <main class="modulo-container">
        <h1>Auditoría del Sistema</h1>

        <!-- Tabla -->
        <section class="tabla-section">
            <table>
                <thead>
                    <tr>
                        <th>Fecha</th>
                        <th>Módulo</th>
                        <th>Tipo</th>
                        <th>Detalle</th>
                    </tr>
                </thead>
                <tbody id="tablaAuditoria"></tbody>
            </table>
        </section>
    </main>

    <script src="js/core.js"></script>
    <script>
        protegerModulo();

        // Cargar menú
        fetch("menu.html")
            .then(r => r.text())
            .then(html => document.getElementById("menu-container").innerHTML = html);

        // Renderizar tabla
        function cargarTabla() {
            const auditoria = getData("auditoria");
            const tbody = document.getElementById("tablaAuditoria");
            tbody.innerHTML = "";

            auditoria.forEach(ev => {
                const tr = document.createElement("tr");

                tr.innerHTML = `
                    <td>${formatDate(ev.fecha)}</td>
                    <td>${ev.modulo}</td>
                    <td>${ev.tipo}</td>
                    <td>${ev.detalle}</td>
                `;

                tbody.appendChild(tr);
            });
        }

        // Inicializar
        cargarTabla();
    </script>

</body>
</html>
