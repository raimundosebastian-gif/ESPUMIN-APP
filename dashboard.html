<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dashboard - ESPUMIN APP</title>

    <link rel="stylesheet" href="style.css" />
  </head>

  <body>
    <!-- ============================================================
         SIDEBAR OSCURO (UNIFICADO)
    ============================================================ -->
    <button id="sidebarToggle" class="sidebar-toggle">â˜°</button>

    <aside id="sidebar" class="sidebar">
      <div class="sidebar-header">
        <span class="sidebar-title">ESPUMIN ERP</span>
        <button id="closeSidebar" class="close-btn">âœ•</button>
      </div>

      <nav class="sidebar-links">
        <div class="sidebar-group">
          <button class="group-btn">ğŸ“Š Panel Principal â–¾</button>
          <div class="group-content">
            <a href="dashboard.html">ğŸ“Š Dashboard</a>
          </div>
        </div>

        <div class="sidebar-group">
          <button class="group-btn">âš™ï¸ Operaciones â–¾</button>
          <div class="group-content">
            <a href="inventario.html">ğŸ“¦ Inventario</a>
            <a href="ventas.html">ğŸ’° Ventas</a>
            <a href="compras.html">ğŸ›’ Compras</a>
            <a href="logistica.html">ğŸšš LogÃ­stica</a>
            <a href="produccion.html">ğŸ­ ProducciÃ³n</a>
          </div>
        </div>

        <div class="sidebar-group">
          <button class="group-btn">ğŸ‘¥ Personas â–¾</button>
          <div class="group-content">
            <a href="clientes.html">ğŸ‘¥ Clientes</a>
            <a href="proveedores.html">ğŸ­ Proveedores</a>
            <a href="usuarios.html">ğŸ” Usuarios</a>
          </div>
        </div>

        <div class="sidebar-group">
          <button class="group-btn">ğŸ’µ Finanzas â–¾</button>
          <div class="group-content">
            <a href="caja.html">ğŸ’µ Caja</a>
            <a href="cuentas-clientes.html">ğŸ“˜ Ctas. Clientes</a>
            <a href="cuentas-proveedores.html">ğŸ“™ Ctas. Proveedores</a>
            <a href="impuestos.html">ğŸ“„ Impuestos</a>
          </div>
        </div>

        <div class="sidebar-group">
          <button class="group-btn">ğŸ–¥ï¸ Sistema â–¾</button>
          <div class="group-content">
            <a href="configuracion.html">âš™ï¸ ConfiguraciÃ³n</a>
            <a href="backups.html">ğŸ’¾ Backups</a>
            <a href="notificaciones.html">ğŸ”” Notificaciones</a>
            <a href="auditoria.html">ğŸ“ AuditorÃ­a</a>
          </div>
        </div>
      </nav>
    </aside>

    <div id="sidebarOverlay" class="sidebar-overlay"></div>

    <!-- ============================================================
         HEADER SUPERIOR
    ============================================================ -->
    <header class="top-header">
      <div class="header-left">
        <span id="headerGreeting">Hola</span>,
        <span id="headerUser" class="header-user"></span>
      </div>

      <div class="header-right">
        <div class="user-avatar" id="userAvatar">U</div>
      </div>
    </header>

    <!-- ============================================================
         DASHBOARD NUEVO â€” TARJETAS
    ============================================================ -->

    <h1 class="dashboard-title">Panel General</h1>

    <div class="cards-container">
      <a
        href="inventario/listado.html"
        class="dash-card"
        data-role="operador,admin"
      >
        <div class="card-icon">ğŸ“¦</div>
        <div class="card-title">Inventario</div>
        <div class="card-desc">Movimientos, ingresos y salidas</div>
      </a>

      <a
        href="clientes/listado.html"
        class="dash-card"
        data-role="operador,admin"
      >
        <div class="card-icon">ğŸ‘¥</div>
        <div class="card-title">Clientes</div>
        <div class="card-desc">GestiÃ³n y cuentas corrientes</div>
      </a>

      <a
        href="proveedores/listado.html"
        class="dash-card"
        data-role="operador,admin"
      >
        <div class="card-icon">ğŸ­</div>
        <div class="card-title">Proveedores</div>
        <div class="card-desc">Altas, cuentas y movimientos</div>
      </a>

      <a href="ventas/nueva.html" class="dash-card" data-role="operador,admin">
        <div class="card-icon">ğŸ’°</div>
        <div class="card-title">Ventas</div>
        <div class="card-desc">Nueva venta y reportes</div>
      </a>

      <a
        href="compras/listado.html"
        class="dash-card"
        data-role="operador,admin"
      >
        <div class="card-icon">ğŸ›’</div>
        <div class="card-title">Compras</div>
        <div class="card-desc">Historial y nuevas compras</div>
      </a>

      <a
        href="logistica/despachos.html"
        class="dash-card"
        data-role="operador,admin"
      >
        <div class="card-icon">ğŸšš</div>
        <div class="card-title">LogÃ­stica</div>
        <div class="card-desc">Despachos y rutas</div>
      </a>

      <a
        href="agenda/general.html"
        class="dash-card"
        data-role="operador,admin"
      >
        <div class="card-icon">ğŸ“…</div>
        <div class="card-title">Agenda</div>
        <div class="card-desc">Agenda general</div>
      </a>

      <a href="auditoria/index.html" class="dash-card" data-role="admin">
        <div class="card-icon">ğŸ“</div>
        <div class="card-title">AuditorÃ­a</div>
        <div class="card-desc">Registro de auditorÃ­a</div>
      </a>

      <a href="backups/index.html" class="dash-card" data-role="admin">
        <div class="card-icon">ğŸ’¾</div>
        <div class="card-title">Backups</div>
        <div class="card-desc">GestiÃ³n de copias</div>
      </a>

      <a href="configuracion/usuarios.html" class="dash-card" data-role="admin">
        <div class="card-icon">ğŸ”</div>
        <div class="card-title">Usuarios</div>
        <div class="card-desc">GestiÃ³n de roles</div>
      </a>
    </div>

    <!-- ============================================================
         SCRIPTS
    ============================================================ -->

    <script src="sidebar.js"></script>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const user = localStorage.getItem("usuario") || "Usuario";
        const hour = new Date().getHours();
        let greeting = "Hola";
        if (hour < 12) greeting = "Buenos dÃ­as";
        else if (hour < 19) greeting = "Buenas tardes";
        else greeting = "Buenas noches";

        document.getElementById("headerGreeting").textContent = greeting;
        document.getElementById("headerUser").textContent = user;
        document.getElementById("userAvatar").textContent = user
          .charAt(0)
          .toUpperCase();

        const userRole = localStorage.getItem("userRole");

        document.querySelectorAll(".dash-card").forEach((card) => {
          const allowed = card.dataset.role.split(",");
          if (!allowed.includes(userRole)) {
            card.style.display = "none";
          }
        });
      });
    </script>
  </body>
</html>
